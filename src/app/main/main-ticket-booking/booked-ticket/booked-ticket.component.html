<!-- fix it -->

<div *ngIf='type === "twoWay"'>
    <div class="ticket" >
        <div class="ticket-details">
            <div class="ticket-details__logo"><img src="/assets/img/airfrance.png" alt="Logo"></div>
            <div class="ticket-details__date">
                <div class="ticket-time">
                    {{ ticket.ticketTo.startTime | date: 'HH:mm'}} - {{ ticket.ticketTo.endTime | date: 'HH:mm' }}
                </div>
                <time class="ticket-date">
                    {{ ticket.ticketTo.startTime | date: 'EEE, MMM dd'}}
                </time>
            </div>
            <div class="ticket-details__trip">
                <p class="ticket-details__flight-duration">
                    {{ ticket.ticketTo.durationTotal | flightTime }}
                </p>
                <div class="ticket-details__route">
                    <span class="ticket-details__route-from">
                        {{ ticket.ticketTo.startAirport.shortName }}
                    </span>
                    
                    <div class="route-details">
                        <div *ngIf='!ticket.ticketTo.direct; else elseBlock' class="route-details__transfer">
                          <img src="/assets/img/route-arrow-transfer.svg" class="route-details__arrow">
                          <div>{{ ticket.ticketTo.flyWay1.endAirport.code }}</div>
                          <div>{{ ticket.ticketTo.flyWay1.duration }}</div>
                        </div>
                        <ng-template #elseBlock class="route-details__transfer">
                          <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                        </ng-template>
                    </div>
                    <span class="ticket-details__route-to">
                        {{ ticket.ticketTo.endAirport.shortName }}
                    </span>
                </div>
            </div>
            <div class="ticket__price">
                {{ ticket.price | currency: undefined: undefined: '2.0-0'}}
            </div>
        </div>
        <div class="trip-info">
            <span class="trip-info__dashes"></span>
            <span class="trip-info__text">{{ ticket.nightsIn }} nights in  {{ ticket.ticketTo.endAirport.city }}</span>
        </div>
        <div class="flight-details" *ngIf='!ticket.ticketTo.direct; else elseBlock1'>
            <div class="flight-details__item">
                <p>{{ ticket.ticketTo.flyWay1.startAirport.shortName }} <span class="text_grey">{{ ticket.ticketTo.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                <div class="flight-details__arrow">
                    <p class="flight-details__arrow-text text_grey">{{ ticket.ticketTo.flyWay1.duration | flightTime }}</p>
                    <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                </div>
                <!-- fix time in second span -->
                <p>{{ ticket.ticketTo.flyWay1.endAirport.shortName }}<span class="text_grey"></span></p>
            </div>
            <div class="flight-details__item">
                <!-- fix time in second span -->
                <p>{{ ticket.ticketTo.flyWay2.startAirport.shortName }}<span class="text_grey"></span></p>
                <div class="flight-details__arrow">
                    <p class="flight-details__arrow-text text_grey">{{ ticket.ticketTo.flyWay2.duration | flightTime }}</p>
                    <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                </div>
                <p>{{ ticket.ticketTo.flyWay2.endAirport.shortName }} <span class="text_grey">{{ ticket.ticketTo.endTime | date: 'HH:mm, MMM dd' }}</span></p>
            </div>
        </div>
        <ng-template #elseBlock1 class="route-details__transfer">
            <div class="flight-details__item">
                <p>{{ ticket.ticketTo.startAirport.shortName }} <span class="text_grey">{{ ticket.ticketTo.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                <div class="flight-details__arrow">
                    <p class="flight-details__arrow-text text_grey">{{ ticket.ticketTo.flyWay1.duration | flightTime }}</p>
                    <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                </div>
                <p>{{ ticket.ticketTo.endAirport.shortName }}<span class="text_grey">{{ ticket.ticketTo.endTime | date: 'HH:mm, MMM dd' }}</span></p>
            </div>
        </ng-template>
    </div>
    <div class="ticket" >
            <div class="ticket-details">
                <div class="ticket-details__logo"><img src="/assets/img/airfrance.png" alt="Logo"></div>
                <div class="ticket-details__date">
                    <div class="ticket-time">
                        {{ ticket.ticketFrom.startTime | date: 'HH:mm'}} - {{ ticket.ticketFrom.endTime | date: 'HH:mm' }}
                    </div>
                    <time class="ticket-date">
                        {{ ticket.ticketFrom.startTime | date: 'EEE, MMM dd'}}
                    </time>
                </div>
                <div class="ticket-details__trip">
                    <p class="ticket-details__flight-duration">
                        {{ ticket.ticketFrom.durationTotal | flightTime }}
                    </p>
                    <div class="ticket-details__route">
                        <span class="ticket-details__route-from">
                            {{ ticket.ticketFrom.startAirport.shortName }}
                        </span>
                        
                        <div class="route-details">
                            <div *ngIf='!ticket.ticketFrom.direct; else elseBlock2' class="route-details__transfer">
                              <img src="/assets/img/route-arrow-transfer.svg" class="route-details__arrow">
                              <div>{{ ticket.ticketFrom.flyWay1.endAirport.code }}</div>
                              <div>{{ ticket.ticketFrom.flyWay1.duration }}</div>
                            </div>
                            <ng-template #elseBlock2  class="route-details__transfer">
                                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                            </ng-template>
                        </div>
                        <span class="ticket-details__route-to">
                            {{ ticket.ticketFrom.endAirport.shortName }}
                        </span>
                    </div>
                </div>
                <div class="ticket__price">
                    {{ ticket.price | currency: undefined: undefined: '2.0-0'}}
                </div>
            </div>
            <div class="trip-info">
                <span class="trip-info__dashes"></span>
                <span class="trip-info__text">{{ ticket.nightsIn }} nights in  {{ ticket.ticketTo.endAirport.city }}</span>
            </div>
            <div class="flight-details" *ngIf='!ticket.ticketFrom.direct; else elseBlock3'>
                <div class="flight-details__item">
                    <p>{{ ticket.ticketFrom.flyWay1.startAirport.shortName }} <span class="text_grey">{{ ticket.ticketFrom.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ ticket.ticketFrom.flyWay1.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <!-- fix time in second span -->
                    <p>{{ ticket.ticketFrom.flyWay1.endAirport.shortName }}<span class="text_grey"></span></p>
                </div>
                <div class="flight-details__item">
                    <!-- fix time in second span -->
                    <p>{{ ticket.ticketTo.flyWay2.startAirport.shortName }}<span class="text_grey"></span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ ticket.ticketFrom.flyWay2.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <p>{{ ticket.ticketFrom.flyWay2.endAirport.shortName }} <span class="text_grey">{{ ticket.ticketFrom.endTime | date: 'HH:mm, MMM dd' }}</span></p>
                </div>
            </div>
            <ng-template #elseBlock3  class="flight-details">
                <!-- <div class="flight-details"> -->
                    <div class="flight-details__item">
                        <p>{{ ticket.ticketFrom.startAirport.shortName }} <span class="text_grey">{{ ticket.ticketFrom.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                        <div class="flight-details__arrow">
                            <p class="flight-details__arrow-text text_grey">{{ ticket.ticketFrom.flyWay1.duration | flightTime }}</p>
                            <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                        </div>
                        <p>{{ ticket.ticketFrom.endAirport.shortName }}<span class="text_grey">{{ ticket.ticketFrom.endTime | date: 'HH:mm, MMM dd' }}</span></p>
                    </div>
                <!-- </div> -->
            </ng-template>
        </div>
</div>

<div *ngIf='type === "oneWay"'>
        <div class="ticket" >
            <div class="ticket-details">
                <div class="ticket-details__logo"><img src="/assets/img/airfrance.png" alt="Logo"></div>
                <div class="ticket-details__date">
                    <div class="ticket-time">
                        {{ ticket.startTime | date: 'HH:mm'}} - {{ ticket.endTime | date: 'HH:mm' }}
                    </div>
                    <time class="ticket-date">
                        {{ ticket.startTime | date: 'EEE, MMM dd'}}
                    </time>
                </div>
                <div class="ticket-details__trip">
                    <p class="ticket-details__flight-duration">
                        {{ ticket.durationTotal | flightTime }}
                    </p>
                    <div class="ticket-details__route">
                        <span class="ticket-details__route-from">
                            {{ ticket.startAirport.shortName }}
                        </span>
                        
                        <div class="route-details">
                            <div *ngIf='!ticket.direct; else elseBlock' class="route-details__transfer">
                              <img src="/assets/img/route-arrow-transfer.svg" class="route-details__arrow">
                              <div>{{ ticket.flyWay1.endAirport.code }}</div>
                              <div>{{ ticket.flyWay1.duration }}</div>
                            </div>
                            <ng-template #elseBlock class="route-details__transfer">
                              <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                            </ng-template>
                        </div>
                        <span class="ticket-details__route-to">
                            {{ ticket.endAirport.shortName }}
                        </span>
                    </div>
                </div>
                <div class="ticket__price">
                    {{ ticket.price | currency: undefined: undefined: '2.0-0'}}
                </div>
            </div>
            <div class="trip-info">
                <span class="trip-info__dashes"></span>
            </div>
            <div class="flight-details" *ngIf='!ticket.direct; else elseBlock1'>
                <div class="flight-details__item">
                    <p>{{ ticket.flyWay1.startAirport.shortName }} <span class="text_grey">{{ ticket.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ ticket.flyWay1.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <!-- fix time in second span -->
                    <p>{{ ticket.flyWay1.endAirport.shortName }}<span class="text_grey"></span></p>
                </div>
                <div class="flight-details__item">
                    <!-- fix time in second span -->
                    <p>{{ ticket.flyWay2.startAirport.shortName }}<span class="text_grey"></span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ ticket.flyWay2.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <p>{{ ticket.flyWay2.endAirport.shortName }} <span class="text_grey">{{ ticket.endTime | date: 'HH:mm, MMM dd' }}</span></p>
                </div>
            </div>
            <ng-template #elseBlock1 class="route-details__transfer">
                <div class="flight-details__item">
                    <p>{{ ticket.startAirport.shortName }} <span class="text_grey">{{ ticket.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ ticket.flyWay1.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <p>{{ ticket.endAirport.shortName }}<span class="text_grey">{{ ticket.endTime | date: 'HH:mm, MMM dd' }}</span></p>
                </div>
            </ng-template>
        </div>
    </div>


<div *ngIf='type === "multitrip"'>
    <div *ngFor='let trip of ticket.flyWays'>
        <div class="ticket" >
            <div class="ticket-details">
                <div class="ticket-details__logo"><img src="/assets/img/airfrance.png" alt="Logo"></div>
                <div class="ticket-details__date">
                    <div class="ticket-time">
                        {{ trip.startTime | date: 'HH:mm'}} - {{ trip.endTime | date: 'HH:mm' }}
                    </div>
                    <time class="ticket-date">
                        {{ trip.startTime | date: 'EEE, MMM dd'}}
                    </time>
                </div>
                <div class="ticket-details__trip">
                    <p class="ticket-details__flight-duration">
                        {{ trip.flyWay.duration | flightTime }}
                    </p>
                    <div class="ticket-details__route">
                        <span class="ticket-details__route-from">
                            {{ trip.flyWay.startAirport.shortName }}
                        </span>
                        
                        <div class="route-details">
                            <div class="route-details__transfer">
                                <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                            </div>

                        </div>
                        <span class="ticket-details__route-to">
                            {{ trip.flyWay.endAirport.shortName }}
                        </span>
                    </div>
                </div>
                <div class="ticket__price">
                    {{ ticket.price | currency: undefined: undefined: '2.0-0'}}
                </div>
            </div>
            <div class="trip-info">
                <span class="trip-info__dashes"></span>
                <span class="trip-info__text" *ngIf='trip.nightsIn'>{{ trip.nightsIn }} nights in  {{ trip.flyWay.endAirport.city }}</span>
            </div>
            <div class="flight-details">
                <div class="flight-details__item">
                    <p>{{ trip.flyWay.startAirport.shortName }} <span class="text_grey">{{ trip.startTime | date: 'HH:mm, MMM dd' }}</span></p>
                    <div class="flight-details__arrow">
                        <p class="flight-details__arrow-text text_grey">{{ trip.flyWay.duration | flightTime }}</p>
                        <img src="/assets/img/route-arrow.svg" class="route-details__arrow">
                    </div>
                    <p>{{ trip.flyWay.endAirport.shortName }}<span class="text_grey">{{ trip.endTime | date: 'HH:mm, MMM dd' }}</span></p>
                </div>
            </div>

        </div>
    </div>
</div>

